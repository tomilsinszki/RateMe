{% extends '::base.html.twig' %}

{% block javascripts %}
    {{ parent() }}

{% endblock %}

{% block body %}
    {{ parent() }}

    <div>
        <a href="{{ path('acme_user_profile_edit') }}">szerkesztés</a>
    </div>

    {% if imageURL %}
        <img src="{{ asset(imageURL) }}" />
    {% endif %}

    <form action="{{ path('acme_user_upload_image') }}" method="post" {{ form_enctype(imageUploadForm) }}>
        {{ form_widget(imageUploadForm) }}

        <input type="submit" value="Kép beállítása" />
    </form>
    
    <div>
        <span style="font-weight:bold;">e-mail:</span> {{ user.username }}
    </div>

    <div>
        <span style="font-weight:bold;">értékelések száma:</span> {{ ratingCount }}
    </div>

    <div>
        <span style="font-weight:bold;">átlag:</span> {{ ratingAverage }}
    </div>

    <div style="margin-top:15px;">
    {% for rating in ratings %}
        <div style="margin-top:15px; border-top:1px solid gray;">
            {% if rating.rateable.collection %}
                <div>
                    hely neve: {{ rating.rateable.collection.name }}
                </div>
            {% endif %}

            <div>
                alkalmazott neve: {{ rating.rateable.name }}
            </div>

            <div>
                beosztása: {{ rating.rateable.typeName }}
            </div>

            <div>
                szavazat ideje: {{ rating.updated|date("Y. m. d. G:i", "Europe/Budapest") }}
            </div>

            <div>
                {% if 1 <= rating.stars %}
                    <img src="{{ asset('images/star_full_150px.png') }}" alt="Full Star" style="display:inline; width:150px;"/>
                {% else %}
                    <img src="{{ asset('images/star_empty_150px.png') }}" alt="Empty Star" style="display:inline; width:150px;"/>
                {% endif %}

                {% if 2 <= rating.stars %}
                    <img src="{{ asset('images/star_full_150px.png') }}" alt="Full Star" style="display:inline; width:150px;"/>
                {% else %}
                    <img src="{{ asset('images/star_empty_150px.png') }}" alt="Empty Star" style="display:inline; width:150px;"/>
                {% endif %}

                {% if 3 <= rating.stars %}
                    <img src="{{ asset('images/star_full_150px.png') }}" alt="Full Star" style="display:inline; width:150px;"/>
                {% else %}
                    <img src="{{ asset('images/star_empty_150px.png') }}" alt="Empty Star" style="display:inline; width:150px;"/>
                {% endif %}

                {% if 4 <= rating.stars %}
                    <img src="{{ asset('images/star_full_150px.png') }}" alt="Full Star" style="display:inline; width:150px;"/>
                {% else %}
                    <img src="{{ asset('images/star_empty_150px.png') }}" alt="Empty Star" style="display:inline; width:150px;"/>
                {% endif %}

                {% if 5 <= rating.stars %}
                    <img src="{{ asset('images/star_full_150px.png') }}" alt="Full Star" style="display:inline; width:150px;"/>
                {% else %}
                    <img src="{{ asset('images/star_empty_150px.png') }}" alt="Empty Star" style="display:inline; width:150px;"/>
                {% endif %}
            </div>
        </div>
    {% endfor %}
    </div>
{% endblock %}
